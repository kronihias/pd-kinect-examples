#N canvas 562 76 604 505 10;
#X obj 23 152 gemwin;
#X msg 53 117 destroy;
#X obj 335 31 cnv 15 190 230 empty empty thresholds 20 12 0 14 -261682
-66577 0;
#X floatatom 424 166 7 0 0 0 - - -;
#X floatatom 344 166 7 0 0 0 - - -;
#X msg 344 185 zmin \$1;
#X obj 344 216 s shader-prop;
#X obj 20 192 freenect-interface;
#X floatatom 425 115 7 0 0 0 - - -;
#X floatatom 345 115 7 0 0 0 - - -;
#X floatatom 425 64 7 0 0 0 - - -;
#X floatatom 345 65 7 0 0 0 - - -;
#X obj 489 107 s shader-prop;
#X obj 487 159 s shader-prop;
#X msg 345 84 xmin \$1;
#X msg 425 84 xmax \$1;
#X msg 345 134 ymin \$1;
#X msg 425 134 ymax \$1;
#X msg 424 185 zmax \$1;
#X obj 492 465 s /freenect;
#X floatatom 492 414 5 0 0 0 - - -;
#X msg 492 441 angle \$1;
#N canvas 430 428 549 292 DRAW-FILLING 0;
#X obj 48 119 pix_image;
#X obj 48 160 pix_texture;
#X msg 130 88 open img1.jpg;
#X obj 48 216 rectangle 4 3;
#X obj 130 54 loadbang;
#X obj 48 35 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 48 62 gemhead 5;
#X obj 266 178 pix_texture;
#X obj 266 234 rectangle 4 3;
#X obj 266 53 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 329 143 r /kinect/tex-id/rgb;
#X obj 266 24 r show-rgb;
#X obj 266 80 gemhead 6;
#X obj 48 9 r show-image;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 7 0 8 0;
#X connect 9 0 12 0;
#X connect 10 0 7 1;
#X connect 11 0 9 0;
#X connect 12 0 7 0;
#X connect 13 0 5 0;
#X restore 22 276 pd DRAW-FILLING;
#N canvas 355 58 717 596 SHADER-DRAW-MASK 0;
#X obj 62 444 glsl_program;
#X obj 62 315 glsl_fragment;
#X msg 137 361 link \$1;
#X obj 62 521 pix_texture;
#X obj 74 468 loadbang;
#X msg 74 491 rectangle 1;
#X obj 135 193 gemhead;
#X obj 135 233 route 1;
#X obj 135 254 delay 1000;
#X obj 135 213 route gem_state;
#X obj 115 412 r shader-prop;
#X obj 62 58 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1 1
;
#X obj 62 80 gemhead 10;
#X obj 62 131 gemframebuffer;
#X text 87 51 get mask into framebuffer;
#X obj 267 47 loadbang;
#X obj 62 566 mesh_square 50;
#X msg 143 543 4;
#X obj 143 518 loadbang;
#X obj 62 171 translateXYZ 0 0 -4;
#X obj 425 394 pix_texture;
#X obj 425 461 rectangle 4 3;
#X obj 425 289 gemhead 15;
#X obj 425 427 translateXYZ 0 0 0;
#X obj 62 30 loadbang;
#X obj 425 264 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 267 75 rectangle 1 \, format RGBA \, dimen 640 640 \, type BYTE
\, color 0 0 0;
#X obj 425 346 alpha;
#X obj 162 309 s gem-init;
#X obj 488 368 r /kinect/tex-id/shader;
#X obj 206 162 s /kinect/tex-id/shader;
#X obj 188 459 r /kinect/tex-id/depth;
#X msg 135 277 open depth_to_alphamask.frag;
#X text 439 235 DRAW BIG MASK;
#X text 81 5 SHADER PART;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 1 1 2 0;
#X connect 2 0 0 0;
#X connect 3 0 16 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 8 0 32 0;
#X connect 8 0 28 0;
#X connect 9 0 7 0;
#X connect 10 0 0 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 19 0;
#X connect 13 1 30 0;
#X connect 15 0 26 0;
#X connect 17 0 16 1;
#X connect 18 0 17 0;
#X connect 19 0 1 0;
#X connect 20 0 23 0;
#X connect 22 0 27 0;
#X connect 23 0 21 0;
#X connect 24 0 11 0;
#X connect 25 0 22 0;
#X connect 26 0 13 0;
#X connect 27 0 20 0;
#X connect 29 0 20 1;
#X connect 31 0 3 1;
#X connect 32 0 1 0;
#X restore 22 310 pd SHADER-DRAW-MASK;
#X text 147 309 alpha mask;
#X text 50 58 create gemwindow;
#X msg 23 79 dimen 640 480 \, color 0 0 0 \, create \, 1;
#X msg 343 294 \; shader-prop xmin -2000 \; shader-prop xmax 2000 \;
shader-prop ymin -10000 \; shader-prop ymax 10000 \; shader-prop zmin
5 \; shader-prop zmax 2000 \;;
#X text 355 47 in millimeters;
#X obj 343 271 bng 15 250 50 0 empty empty distance_to_start 17 7 0
10 -262144 -1 -1;
#X text 6 5 filter out certain parts of the depthmap and use as mask
;
#X obj 135 265 tgl 15 0 show-image show-image show-image 17 7 0 10
-262144 -1 -1 0 1;
#X obj 135 282 tgl 15 0 show-rgb show-rgb show-rgb 17 7 0 10 -262144
-1 -1 0 1;
#X text 17 456 (C)2012 Matthias Kronlachner;
#X text 44 474 thanks to Marian Weger!;
#X text 30 25 computation done on GPU by OpenGL Shader;
#X text 349 416 change angle of kinect;
#X text 356 243 camera origin is at (0 \, 0 \, 0);
#N canvas 476 447 803 246 DRAW-SMALL-VIDEOS 1;
#X obj 33 89 pix_texture;
#X obj 33 156 rectangle 1 0.75;
#X obj 253 89 pix_texture;
#X obj 253 156 rectangle 1 0.75;
#X text 149 10 draw kinect pictures on bottom left;
#X obj 33 52 gemhead 5;
#X obj 253 52 gemhead 5;
#X obj 33 114 translateXYZ -4 -3 0.1;
#X obj 253 114 translateXYZ -2 -3 0.1;
#X obj 503 129 pix_texture;
#X obj 503 196 rectangle 1 0.75;
#X obj 503 164 translateXYZ 0 -3 0.1;
#X obj 503 42 gemhead 15;
#X obj 96 65 r /kinect/tex-id/rgb;
#X obj 316 58 r /kinect/tex-id/depth;
#X obj 598 94 r /kinect/tex-id/shader;
#X obj 503 94 color 1 1 1 1;
#X connect 0 0 7 0;
#X connect 2 0 8 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 7 0 1 0;
#X connect 8 0 3 0;
#X connect 9 0 11 0;
#X connect 11 0 10 0;
#X connect 12 0 16 0;
#X connect 13 0 0 1;
#X connect 14 0 2 1;
#X connect 15 0 9 1;
#X connect 16 0 9 0;
#X restore 22 239 pd DRAW-SMALL-VIDEOS;
#X connect 1 0 0 0;
#X connect 3 0 18 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 8 0 17 0;
#X connect 9 0 16 0;
#X connect 10 0 15 0;
#X connect 11 0 14 0;
#X connect 14 0 12 0;
#X connect 15 0 12 0;
#X connect 16 0 13 0;
#X connect 17 0 13 0;
#X connect 18 0 6 0;
#X connect 20 0 21 0;
#X connect 21 0 19 0;
#X connect 26 0 0 0;
#X connect 29 0 27 0;
