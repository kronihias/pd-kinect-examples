#N canvas 552 53 604 505 10;
#X declare -path ../externals;
#X obj 23 192 gemwin;
#X msg 53 157 destroy;
#X obj 335 28 cnv 15 190 230 empty empty thresholds 20 12 0 14 -261682
-66577 0;
#X floatatom 424 166 7 0 0 0 - - -;
#X floatatom 344 166 7 0 0 0 - - -;
#X obj 20 232 freenect-interface;
#X floatatom 425 115 7 0 0 0 - - -;
#X floatatom 345 115 7 0 0 0 - - -;
#X floatatom 425 64 7 0 0 0 - - -;
#X floatatom 345 65 7 0 0 0 - - -;
#X obj 492 475 s /freenect;
#X floatatom 492 429 5 0 0 0 - - -;
#X msg 492 451 angle \$1;
#N canvas 430 428 549 292 DRAW-FILLING 0;
#X obj 48 119 pix_image;
#X obj 48 160 pix_texture;
#X msg 130 88 open img1.jpg;
#X obj 48 216 rectangle 4 3;
#X obj 130 54 loadbang;
#X obj 48 35 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 48 62 gemhead 5;
#X obj 266 178 pix_texture;
#X obj 266 234 rectangle 4 3;
#X obj 266 53 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 329 143 r /kinect/tex-id/rgb;
#X obj 266 24 r show-rgb;
#X obj 266 80 gemhead 6;
#X obj 48 9 r show-image;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 7 0 8 0;
#X connect 9 0 12 0;
#X connect 10 0 7 1;
#X connect 11 0 9 0;
#X connect 12 0 7 0;
#X connect 13 0 5 0;
#X restore 22 324 pd DRAW-FILLING;
#X text 101 363 alpha mask;
#X text 50 98 create gemwindow;
#X text 355 47 in millimeters;
#X obj 342 262 bng 15 250 50 0 empty empty parameters_to_start 17 7
0 10 -262144 -1 -1;
#X text 6 5 filter out certain parts of the depthmap and use as mask
;
#X obj 122 315 tgl 15 0 show-image show-image show-image 17 7 0 10
-262144 -1 -1 0 1;
#X obj 122 332 tgl 15 0 show-rgb show-rgb show-rgb 17 7 0 10 -262144
-1 -1 0 1;
#X text 14 474 (C)2012 Matthias Kronlachner;
#X obj 489 107 s threshold_depth;
#X obj 487 159 s threshold_depth;
#X obj 344 216 s threshold_depth;
#X msg 345 84 x_min \$1;
#X msg 425 84 x_max \$1;
#X msg 345 134 y_min \$1;
#X msg 425 134 y_max \$1;
#X text 367 237 camera is centered (0 \, 0);
#X msg 344 185 lo_thresh \$1;
#X msg 424 185 hi_thresh \$1;
#X text 510 186 this is z;
#N canvas 666 153 502 431 DRAW-MASK 0;
#X obj 46 47 r /kinect/gemlist/depth;
#X obj 46 186 pix_texture;
#X obj 46 114 pix_threshold_depth;
#X obj 46 384 rectangle 4 3;
#X obj 46 350 translateXYZ 0 0 0;
#X obj 46 259 gemhead;
#X obj 46 289 alpha;
#X obj 46 320 pix_texture;
#X obj 66 80 r threshold_depth;
#X msg 227 108 trim \$1;
#X obj 227 79 tgl 15 0 empty empty ON/OFF 17 7 0 10 -262144 -1 -1 0
1;
#X obj 227 155 s threshold_depth;
#X msg 306 103 invert \$1;
#X obj 306 80 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 157 206 s /kinect/tex-id/mask;
#X msg 381 102 whitening \$1;
#X obj 381 77 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 79 21 FILTER DEPTHMAP;
#X text 50 240 DRAW IT;
#X obj 46 160 pix_invert;
#X obj 53 137 tgl 15 0 empty empty make_it_black 17 7 0 10 -262144
-1 -1 0 1;
#X connect 0 0 2 0;
#X connect 1 1 7 1;
#X connect 1 1 14 0;
#X connect 2 0 19 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 4 0;
#X connect 8 0 2 0;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 12 0 11 0;
#X connect 13 0 12 0;
#X connect 15 0 11 0;
#X connect 16 0 15 0;
#X connect 19 0 1 0;
#X connect 20 0 19 0;
#X restore 22 360 pd DRAW-MASK;
#X msg 23 119 dimen 640 480 \, color 0 0 0 \, create \, 1;
#X obj 434 4 declare -path ../externals;
#X msg 342 284 \; threshold_depth x_min -1000 \; threshold_depth x_max
1000 \; threshold_depth y_min -1000 \; threshold_depth y_max 1000 \;
threshold_depth lo_thresh 5 \; threshold_depth hi_thresh 1500 \; threshold_depth
whitening 1 \; threshold_depth trim 1 \; threshold_depth invert 1 \;
;
#X text 29 23 !!computes on CPU with pix_threshold_depth;
#N canvas 476 447 803 246 DRAW-SMALL-VIDEOS 0;
#X obj 33 89 pix_texture;
#X obj 33 156 rectangle 1 0.75;
#X obj 253 89 pix_texture;
#X obj 253 156 rectangle 1 0.75;
#X text 149 10 draw kinect pictures on bottom left;
#X obj 33 52 gemhead 5;
#X obj 253 52 gemhead 5;
#X obj 33 114 translateXYZ -4 -3 0.1;
#X obj 253 114 translateXYZ -2 -3 0.1;
#X obj 503 129 pix_texture;
#X obj 503 196 rectangle 1 0.75;
#X obj 503 164 translateXYZ 0 -3 0.1;
#X obj 503 42 gemhead 15;
#X obj 96 65 r /kinect/tex-id/rgb;
#X obj 316 58 r /kinect/tex-id/depth;
#X obj 503 94 color 1 1 1 1;
#X obj 598 94 r /kinect/tex-id/mask;
#X connect 0 0 7 0;
#X connect 2 0 8 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 7 0 1 0;
#X connect 8 0 3 0;
#X connect 9 0 11 0;
#X connect 11 0 10 0;
#X connect 12 0 15 0;
#X connect 13 0 0 1;
#X connect 14 0 2 1;
#X connect 15 0 9 0;
#X connect 16 0 9 1;
#X restore 22 279 pd DRAW-SMALL-VIDEOS;
#X text 351 448 change angle of kinect;
#X connect 1 0 0 0;
#X connect 3 0 31 0;
#X connect 4 0 30 0;
#X connect 6 0 28 0;
#X connect 7 0 27 0;
#X connect 8 0 26 0;
#X connect 9 0 25 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 17 0 36 0;
#X connect 25 0 22 0;
#X connect 26 0 22 0;
#X connect 27 0 23 0;
#X connect 28 0 23 0;
#X connect 30 0 24 0;
#X connect 31 0 24 0;
#X connect 34 0 0 0;
