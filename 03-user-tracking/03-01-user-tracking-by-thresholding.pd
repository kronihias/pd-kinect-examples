#N canvas 559 87 604 505 10;
#X declare -path ../externals;
#X obj 23 192 gemwin;
#X msg 53 157 destroy;
#X obj 335 28 cnv 15 190 230 empty empty thresholds 20 12 0 14 -261682
-66577 0;
#X floatatom 424 166 7 0 0 0 - - -;
#X floatatom 344 166 7 0 0 0 - - -;
#X obj 20 232 freenect-interface;
#X floatatom 425 115 7 0 0 0 - - -;
#X floatatom 345 115 7 0 0 0 - - -;
#X floatatom 425 64 7 0 0 0 - - -;
#X floatatom 345 65 7 0 0 0 - - -;
#X obj 492 475 s /freenect;
#X floatatom 492 429 5 0 0 0 - - -;
#X msg 492 451 angle \$1;
#X text 101 333 alpha mask;
#X text 50 98 create gemwindow;
#X text 355 47 in millimeters;
#X obj 342 262 bng 15 250 50 0 empty empty parameters_to_start 17 7
0 10 -262144 -1 -1;
#X text 14 474 (C)2012 Matthias Kronlachner;
#X obj 489 107 s threshold_depth;
#X obj 487 159 s threshold_depth;
#X obj 344 216 s threshold_depth;
#X msg 345 84 x_min \$1;
#X msg 425 84 x_max \$1;
#X msg 345 134 y_min \$1;
#X msg 425 134 y_max \$1;
#X text 367 237 camera is centered (0 \, 0);
#X msg 344 185 lo_thresh \$1;
#X msg 424 185 hi_thresh \$1;
#X text 510 186 this is z;
#N canvas 666 153 502 431 DRAW-MASK 1;
#X obj 46 27 r /kinect/gemlist/depth;
#X obj 46 146 pix_texture;
#X obj 46 94 pix_threshold_depth;
#X obj 46 384 rectangle 4 3;
#X obj 46 350 translateXYZ 0 0 0;
#X obj 46 259 gemhead;
#X obj 46 289 alpha;
#X obj 46 320 pix_texture;
#X obj 66 60 r threshold_depth;
#X msg 227 108 trim \$1;
#X obj 227 79 tgl 15 0 empty empty ON/OFF 17 7 0 10 -262144 -1 -1 0
1;
#X obj 227 155 s threshold_depth;
#X msg 306 103 invert \$1;
#X obj 306 80 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 157 206 s /kinect/tex-id/mask;
#X msg 381 102 whitening \$1;
#X obj 381 77 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 79 1 FILTER DEPTHMAP;
#X text 50 240 DRAW IT;
#X obj 46 185 s /kinect/gemlist/threshold;
#X obj 46 117 pix_grey;
#X connect 0 0 2 0;
#X connect 1 0 19 0;
#X connect 1 1 7 1;
#X connect 1 1 14 0;
#X connect 2 0 20 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 4 0;
#X connect 8 0 2 0;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 12 0 11 0;
#X connect 13 0 12 0;
#X connect 15 0 11 0;
#X connect 16 0 15 0;
#X connect 20 0 1 0;
#X restore 22 330 pd DRAW-MASK;
#X msg 23 119 dimen 640 480 \, color 0 0 0 \, create \, 1;
#X obj 434 4 declare -path ../externals;
#X text 13 36 !!computes on CPU with pix_threshold_depth;
#N canvas 476 447 803 246 DRAW-SMALL-VIDEOS 0;
#X obj 33 89 pix_texture;
#X obj 33 156 rectangle 1 0.75;
#X obj 253 89 pix_texture;
#X obj 253 156 rectangle 1 0.75;
#X text 149 10 draw kinect pictures on bottom left;
#X obj 33 52 gemhead 5;
#X obj 253 52 gemhead 5;
#X obj 33 114 translateXYZ -4 -3 0.1;
#X obj 253 114 translateXYZ -2 -3 0.1;
#X obj 503 129 pix_texture;
#X obj 503 196 rectangle 1 0.75;
#X obj 503 164 translateXYZ 0 -3 0.1;
#X obj 503 42 gemhead 15;
#X obj 96 65 r /kinect/tex-id/rgb;
#X obj 316 58 r /kinect/tex-id/depth;
#X obj 503 94 color 1 1 1 1;
#X obj 598 94 r /kinect/tex-id/mask;
#X connect 0 0 7 0;
#X connect 2 0 8 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 7 0 1 0;
#X connect 8 0 3 0;
#X connect 9 0 11 0;
#X connect 11 0 10 0;
#X connect 12 0 15 0;
#X connect 13 0 0 1;
#X connect 14 0 2 1;
#X connect 15 0 9 0;
#X connect 16 0 9 1;
#X restore 22 299 pd DRAW-SMALL-VIDEOS;
#X text 351 448 change angle of kinect;
#X text 6 5 filter out certain parts of the depthmap and use mask for
tracking;
#X msg 342 284 \; threshold_depth x_min -1000 \; threshold_depth x_max
1000 \; threshold_depth y_min -1000 \; threshold_depth y_max 1000 \;
threshold_depth lo_thresh 1000 \; threshold_depth hi_thresh 1800 \;
threshold_depth whitening 1 \; threshold_depth trim 1 \; threshold_depth
invert 0 \;;
#X obj 24 255 # openni-interface;
#N canvas 696 324 483 373 BLOB-DETECTION 0;
#X obj 75 33 cnv 15 185 120 empty empty empty 20 12 0 14 -24198 -66577
0;
#X floatatom 87 50 3 0 100 2 threshold - -;
#X obj 87 67 / 100;
#X msg 87 88 threshold \$1;
#X floatatom 177 50 3 0 100 2 blobsize - -;
#X obj 177 67 / 100;
#X msg 177 88 blobSize \$1;
#X floatatom 187 186 5 0 0 1 x - -;
#X floatatom 188 202 5 0 0 1 y - -;
#X floatatom 188 218 5 0 0 1 size - -;
#X floatatom 189 234 5 0 0 1 minX - -;
#X floatatom 189 250 5 0 0 1 minY - -;
#X floatatom 190 266 5 0 0 1 maxX - -;
#X floatatom 190 282 5 0 0 1 maxY - -;
#X floatatom 191 298 5 0 0 1 area - -;
#N canvas 95 114 687 354 showblob 0;
#X obj 67 86 inlet blobinformation;
#X msg 67 114 \$3 \$4 \$5 \$6 \$7 \$8 \$9 \$10;
#X obj 67 138 unpack 0 0 0 0 0 0 0 0;
#X obj 67 167 outlet weightedX;
#X obj 88 187 outlet weightedY;
#X obj 109 207 outlet weightedSize;
#X obj 156 236 outlet minX;
#X obj 177 256 outlet minY;
#X obj 243 236 outlet maxX;
#X obj 283 261 outlet maxY;
#X obj 348 238 outlet size;
#X text 60 45 this extracts information of the 1st detected blob;
#N canvas 517 405 450 300 rectangle 0;
#X obj 68 75 inlet;
#X obj 215 -1 inlet;
#X obj 68 257 rectangle;
#X obj 68 234 translateXYZ;
#X obj 215 69 unpack 0 0 0 0;
#X obj 215 94 +;
#X obj 254 95 +;
#X text 248 125 0..2;
#X text 250 145 -1..+1;
#X obj 340 148 -;
#X obj 377 149 -;
#X obj 193 124 - 1;
#X obj 193 147 * 4;
#X obj 222 123 - 1;
#X obj 340 180 * -4;
#X obj 377 180 * -4;
#X obj 222 146 * -4;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 4 1 5 1;
#X connect 4 1 9 1;
#X connect 4 2 6 0;
#X connect 4 2 10 0;
#X connect 4 3 6 1;
#X connect 4 3 10 1;
#X connect 5 0 11 0;
#X connect 6 0 13 0;
#X connect 9 0 14 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 3 1;
#X connect 13 0 16 0;
#X connect 14 0 2 1;
#X connect 15 0 2 2;
#X connect 16 0 3 2;
#X restore 346 188 pd rectangle;
#X obj 346 117 color 1 1 1 0.5;
#X obj 346 96 gemhead 70;
#X obj 346 138 alpha;
#X msg 415 164 \$6 \$8 \$7 \$9;
#X connect 0 0 1 0;
#X connect 0 0 16 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 2 2 5 0;
#X connect 2 3 6 0;
#X connect 2 4 7 0;
#X connect 2 5 8 0;
#X connect 2 6 9 0;
#X connect 2 7 10 0;
#X connect 13 0 15 0;
#X connect 14 0 13 0;
#X connect 15 0 12 0;
#X connect 16 0 12 1;
#X restore 165 161 pd showblob 1;
#X obj 75 122 pix_multiblob 6;
#X obj 42 5 r /kinect/gemlist/threshold;
#N canvas 230 185 362 302 showblob 0;
#X obj 157 48 inlet blobinformation;
#N canvas 517 405 450 300 rectangle 0;
#X obj 68 75 inlet;
#X obj 215 -1 inlet;
#X obj 68 257 rectangle;
#X obj 68 234 translateXYZ;
#X obj 215 69 unpack 0 0 0 0;
#X obj 215 94 +;
#X obj 254 95 +;
#X text 248 125 0..2;
#X text 250 145 -1..+1;
#X obj 340 148 -;
#X obj 377 149 -;
#X obj 193 124 - 1;
#X obj 193 147 * 4;
#X obj 222 123 - 1;
#X obj 340 180 * -4;
#X obj 377 180 * -4;
#X obj 222 146 * -4;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 4 1 5 1;
#X connect 4 1 9 1;
#X connect 4 2 6 0;
#X connect 4 2 10 0;
#X connect 4 3 6 1;
#X connect 4 3 10 1;
#X connect 5 0 11 0;
#X connect 6 0 13 0;
#X connect 9 0 14 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 3 1;
#X connect 13 0 16 0;
#X connect 14 0 2 1;
#X connect 15 0 2 2;
#X connect 16 0 3 2;
#X restore 53 188 pd rectangle;
#X obj 53 117 color 1 1 1 0.5;
#X obj 53 96 gemhead 70;
#X obj 53 138 alpha;
#X msg 122 164 \$14 \$16 \$15 \$17;
#X connect 0 0 5 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 5 0 1 1;
#X restore 290 168 pd showblob 2;
#X text 53 323 parsing the blobs should done with some more logic!
;
#X text 157 339 eg. iemmatrix;
#X text 252 9 taken from pix_multiblob help file;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 16 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 16 0;
#X connect 15 0 7 0;
#X connect 15 1 8 0;
#X connect 15 2 9 0;
#X connect 15 3 10 0;
#X connect 15 4 11 0;
#X connect 15 5 12 0;
#X connect 15 6 13 0;
#X connect 15 7 14 0;
#X connect 16 1 15 0;
#X connect 16 1 18 0;
#X connect 17 0 16 0;
#X restore 23 366 pd BLOB-DETECTION;
#X text 30 53 and pix_multiblob;
#X obj 264 251 loadbang;
#X connect 1 0 0 0;
#X connect 3 0 27 0;
#X connect 4 0 26 0;
#X connect 6 0 24 0;
#X connect 7 0 23 0;
#X connect 8 0 22 0;
#X connect 9 0 21 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 16 0 36 0;
#X connect 21 0 18 0;
#X connect 22 0 18 0;
#X connect 23 0 19 0;
#X connect 24 0 19 0;
#X connect 26 0 20 0;
#X connect 27 0 20 0;
#X connect 30 0 0 0;
#X connect 40 0 16 0;
